
<!doctype html><html itemscope lang=en-us itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5"><meta name=theme-name content="hugoplate"><link rel="shortcut icon" href=https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_96x0_resize_lanczos_3.png type=image/x-icon><link rel=icon href=https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_96x0_resize_lanczos_3.png type=image/x-icon><link rel=icon type=image/png sizes=48x48 href=https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_48x0_resize_lanczos_3.png><link rel=icon type=image/png sizes=96x96 href=https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_96x0_resize_lanczos_3.png><link rel=apple-touch-icon sizes=144x144 href=https://threedots.tech/images/favicon_hu0d95454e65643b4b3a38fde8f31a0ef0_20324_144x0_resize_lanczos_3.png><link rel=manifest href=https://threedots.tech/manifest.webmanifest><meta name=msapplication-TileColor content="#ddd"><meta name=theme-color content="#ffffff"><title>Optimising and Visualising Go Tests Parallelism: Why more cores don't speed up your Go tests | Three Dots Labs blog</title>
  <meta name=author content="Robert Laszczak"><meta name=description content="Recently, I struggled for a couple of hours to understand why the API tests of one project were slow. In theory, we designed tests to run in a fully parallel way – the duration of tests should be close to the longest-running test. Unfortunately, the reality was different. Tests took 7x longer than the slowest test without using 100% available resources."><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@ThreeDotsLabs"><meta name=twitter:title content="Optimising and Visualising Go Tests Parallelism: Why more cores don't speed up your Go tests"><meta name=twitter:description content="Recently, I struggled for a couple of hours to understand why the API tests of one project were slow. In theory, we designed tests to run in a fully parallel way – the duration of tests should be close to the longest-running test. Unfortunately, the reality was different. Tests took 7x longer than the slowest test without using 100% available resources."><meta name=twitter:image content="https://threedots.tech/images/covers/go-test-parallelism-social.png"><meta name=twitter:creator content="@roblaszczak"><meta property="og:type" content="article"><meta property="og:title" content="Optimising and Visualising Go Tests Parallelism: Why more cores don't speed up your Go tests"><meta property="og:description" content="Recently, I struggled for a couple of hours to understand why the API tests of one project were slow. In theory, we designed tests to run in a fully parallel way – the duration of tests should be close to the longest-running test. Unfortunately, the reality was different. Tests took 7x longer than the slowest test without using 100% available resources."><meta property="og:url" content="https://threedots.tech/post/go-test-parallelism/"><meta property="og:image" content="https://threedots.tech/images/covers/go-test-parallelism-social.png"><link rel=canonical href=https://threedots.tech/post/go-test-parallelism/><link rel=alternative href=https://threedots.tech/index.xml title="Learn Building Modern Go applications" type=application/atom+xml><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta http-equiv=Cache-Control content="no-transform"><meta name=robots content="index,follow"><meta name=referrer content="origin-when-cross-origin"><meta name=google-site-verification content="_moDmnnBNVLBN1rzNxyGUGdPHE20YgbmrtzLIbxaWFc"><script>let indexURL="https://threedots.tech/searchindex.json",includeSectionsInSearch=["post","learn"],no_results_for="No results for",empty_search_results_placeholder="Type something to search.."</script><meta http-equiv=x-dns-prefetch-control content="on"><link rel=preconnect href=https://use.fontawesome.com crossorigin><link rel=preconnect href=//cdnjs.cloudflare.com><link rel=preconnect href=//www.googletagmanager.com><link rel=preconnect href=//www.google-analytics.com><link rel=dns-prefetch href=https://use.fontawesome.com><link rel=dns-prefetch href=//ajax.googleapis.com><link rel=dns-prefetch href=//cdnjs.cloudflare.com><link rel=dns-prefetch href=//www.googletagmanager.com><link rel=dns-prefetch href=//www.google-analytics.com><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//connect.facebook.net><link rel=dns-prefetch href=//platform.linkedin.com><link rel=dns-prefetch href=//platform.twitter.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;600&family=Quicksand:wght@700&family=Source+Serif+Pro:ital,wght@0,400;0,600;1,400&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><link href="/css/style.min.f128c563614d907da4f0a16956b6d79bc33bdcfe2f60cd52d008e190d8a21c8c.css" integrity="sha256-8SjFY2FNkH2k8KFpVrbXm8M73P4vYM1S0AjhkNiiHIw=" rel=stylesheet><link defer async rel=stylesheet href="/css/style-lazy.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css" integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" media=print onload='this.media="all",this.onload=null'></head><body><script defer data-domain=threedots.tech src=https://threedots.tech/js/pm.js></script><script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script><script>let postReadingTimeMinutes=12,wordCount=2369</script><div class=suspension><span title="Go to top" class="to-top is-hide"><svg class="arrow-up icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></span><a title="Go to comments" class="to-comment is-hide" href=#disqus_thread><svg class="comment icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 32C114.6 32 0 125.1.0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3.0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4.0 256-93.1 256-208S397.4 32 256 32z"/></svg></a></div><header class="header sticky top-0 z-30"><nav class="navbar container"><div class=order-0><a class="navbar-brand block" href=https://threedots.tech/><img fetchpriority=high loading=lazy decoding=async class="img logo-light" width=200 height=31 src=https://threedots.tech/images/logo.svg alt="Three Dots Labs" onerror='this.onerror=null,this.src=""'>
  <img fetchpriority=high loading=lazy decoding=async class="img logo-dark" width=200 height=31 src=https://threedots.tech/images/logo-darkmode.svg alt="Three Dots Labs" onerror='this.onerror=null,this.src=""'></a></div><input id=nav-toggle type=checkbox class=hidden>
  <label for=nav-toggle class="order-3 cursor-pointer flex items-center lg:hidden text-dark dark:text-white lg:order-1"><svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20"><title>Menu Open</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0V0z"/></svg><svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20"><title>Menu Close</title><polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"/></svg></label><ul id=nav-menu class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8"><li class=nav-item><a class=nav-link href=https://threedots.tech/>Home</a></li><li class=nav-item><a class=nav-link href=https://threedots.tech/post/>Blog</a></li><li class=nav-item><a class=nav-link href=https://threedots.tech/newsletter/>Newsletter</a></li><li class=nav-item><a class=nav-link href=https://threedots.tech/learn/>Trainings & Courses</a></li><li class="mt-4 inline-block lg:hidden"><a class="btn btn-primary btn-sm" href="https://threedots.tech/go-with-the-domain/?utm_source=topbar"><span class=pr-2><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32 93.5 32 46.3 45.3 18.1 56.1 6.8 60.5.0 71.7.0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9.0 79 14 105.6 23.5zm76.8.0C353 462 398.1 448 432 448c38.5.0 88.4 12.1 119.9 22.6 11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4.0-103.4 20-123 35.6-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"/></svg></span>Get our e-book</a></li></ul><div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0"><button aria-label=search class="border-border text-dark hover:text-primary dark:border-darkmode-border mr-5 inline-block border-r pr-5 text-xl dark:text-white dark:hover:text-darkmode-primary" data-target=search-modal><svg class="search icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></button><div class="theme-switcher mr-5"><input id=theme-switcher data-theme-switcher type=checkbox>
    <label for=theme-switcher><span class=sr-only>theme switcher</span>
      <span><svg class="absolute left-[4px] top-[4px] z-10 opacity-100 dark:opacity-0" viewBox="0 0 56 56" fill="#fff" height="16" width="16"><path d="M30 4.6c0-1-.9-2-2-2a2 2 0 00-2 2v5c0 1 .9 2 2 2s2-1 2-2zm9.6 9a2 2 0 000 2.8c.8.8 2 .8 2.9.0L46 13a2 2 0 000-2.9 2 2 0 00-3 0zm-26 2.8c.7.8 2 .8 2.8.0.8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9.0-.7.8-.7 2.1.0 3zM28 16A12 12 0 0016 28a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0028 16zm23.3 14c1.1.0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 00-2 2c0 1.1 1 2 2 2zM4.7 26a2 2 0 00-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2zm37.8 13.6a2 2 0 00-3 0 2 2 0 000 2.9l3.6 3.5a2 2 0 002.9.0c.8-.8.8-2.1.0-3zM10 43.1a2 2 0 000 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1.0-2.9s-2-.8-2.9.0zm20 3.4c0-1.1-.9-2-2-2a2 2 0 00-2 2v4.9c0 1 .9 2 2 2s2-1 2-2z"/></svg><svg class="absolute left-[4px] top-[4px] z-10 opacity-0 dark:opacity-100" viewBox="0 0 24 24" fill="none" height="16" width="16"><path fill="#000" fill-rule="evenodd" clip-rule="evenodd" d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4.0 008.7 1.8c1-.3 2 .5 1.5 1.5v.1A10.3 10.3.0 0112.4 22 10.3 10.3.0 013.2 6.7c1-2 2.9-3.5 4.9-4.4z"/></svg></span></label></div><script>var darkMode=!1,themeSwitch;localStorage.getItem("theme")==="dark"?darkMode=!0:localStorage.getItem("theme")==="light"&&(darkMode=!1),darkMode&&document.documentElement.classList.toggle("dark"),themeSwitch=document.querySelectorAll("[data-theme-switcher]"),document.addEventListener("DOMContentLoaded",()=>{[].forEach.call(themeSwitch,function(e){e.checked=!!darkMode,e.addEventListener("click",()=>{document.documentElement.classList.toggle("dark"),localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light")})})})</script><a href="https://threedots.tech/go-with-the-domain/?utm_source=topbar" class="btn btn-primary hidden lg:inline-block"><span class=pr-2><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M249.6 471.5c10.8 3.8 22.4-4.1 22.4-15.5V78.6c0-4.2-1.6-8.4-5-11C247.4 52 202.4 32 144 32 93.5 32 46.3 45.3 18.1 56.1 6.8 60.5.0 71.7.0 83.8V454.1c0 11.9 12.8 20.2 24.1 16.5C55.6 460.1 105.5 448 144 448c33.9.0 79 14 105.6 23.5zm76.8.0C353 462 398.1 448 432 448c38.5.0 88.4 12.1 119.9 22.6 11.3 3.8 24.1-4.6 24.1-16.5V83.8c0-12.1-6.8-23.3-18.1-27.6C529.7 45.3 482.5 32 432 32c-58.4.0-103.4 20-123 35.6-3.3 2.6-5 6.8-5 11V456c0 11.4 11.7 19.3 22.4 15.5z"/></svg></span>Get our e-book</a></div></nav></header><div class=search-modal aria-hidden=true style=--color-primary:#121212><div data-target=close-search-modal class=search-modal-overlay></div><div class=search-wrapper data-image=true data-description=true data-tags=true data-categories=true><div class=search-wrapper-header><label for=search-modal-input style=margin-top:-1px><span class=sr-only>search icon</span>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-icon" data-type="search"><path fill="currentcolor" d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8.0 45.3s-32.8 12.5-45.3.0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9.0 208S93.1.0 208 0 416 93.1 416 208zM208 352a144 144 0 100-288 144 144 0 100 288z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="18" width="18" class="search-reset" data-type="reset"><path fill="currentcolor" d="M256 512A256 256 0 10256 0a256 256 0 100 512zM175 175c9.4-9.4 24.6-9.4 33.9.0l47 47 47-47c9.4-9.4 24.6-9.4 33.9.0s9.4 24.6.0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6.0 33.9s-24.6 9.4-33.9.0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9.0s-9.4-24.6.0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6.0-33.9z"/></svg></label><input id=search-modal-input type=text data-search-input autocomplete=off aria-label=Search placeholder="Search Post ..."></div><div class=search-wrapper-body><div class=search-result data-search-result></div><span class=search-result-empty>Type something to search..</span></div><div class=search-wrapper-footer><span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" viewBox="0 0 16 16"><path d="M3.204 11h9.592L8 5.519 3.204 11zm-.753-.659 4.796-5.48a1 1 0 011.506.0l4.796 5.48c.566.647.106 1.659-.753 1.659H3.204a1 1 0 01-.753-1.659z"/></svg></kbd><kbd><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentcolor" style="margin-top:1px" viewBox="0 0 16 16"><path d="M3.204 5h9.592L8 10.481 3.204 5zm-.753.659 4.796 5.48a1 1 0 001.506.0l4.796-5.48c.566-.647.106-1.659-.753-1.659H3.204a1 1 0 00-.753 1.659z"/></svg></kbd>to navigate
</span><span><kbd><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentcolor" style="display:inline-block" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.5 1.5a.5.5.0 01.5.5v4.8a2.5 2.5.0 01-2.5 2.5H2.707l3.347 3.346a.5.5.0 01-.708.708l-4.2-4.2a.5.5.0 010-.708l4-4a.5.5.0 11.708.708L2.707 8.3H12.5A1.5 1.5.0 0014 6.8V2a.5.5.0 01.5-.5z"/></svg></kbd>to select
</span><span class=search-result-info></span>
  <span data-target=close-search-modal><kbd>ESC</kbd> to close</span></div></div></div><main><section class="section pt-7"><div class=container><div class="row justify-center"><article class=lg:col-7><h1 class="h2 mb-2">Optimising and Visualising Go Tests Parallelism: Why more cores don't speed up your Go tests</h1><ul class=mb-4><li class="inline-block mb-5"></li><li class="mr-4 inline-block"><div class="flex flex-row"><div class=shrink-0><div class=mr-4><a href=https://threedots.tech/about/><img src=https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_100x100_resize_q80_h2_lanczos.webp loading=lazy srcset="https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_100x100_resize_q80_h2_lanczos.webp 1x, https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_200x200_resize_q80_h2_lanczos.webp 2x, https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_300x300_resize_q80_h2_lanczos.webp 3x, https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_90x90_resize_q80_h2_lanczos.webp 90w" decoding=async alt=Avatar class="rounded-full inline img" width=100 height=100 onerror='this.onerror="null",this.src="/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_100x100_resize_q80_lanczos.jpeg"'></a></div></div><div><p class=author-meta><a href=https://twitter.com/roblaszczak target=_blank class="author-name h4"><b>Robert Laszczak</b></a><br><ps class=author-meta-bio>Co-founder of <a href=https://threedotslabs.com/ target=_blank>Three Dots Labs</a>.
  Creator of <a href=https://github.com/ThreeDotsLabs/watermill target=_blank>Watermill</a>.</ps></p></div></div></li></ul><div class="content mb-10"><p>Recently, I struggled for a couple of hours to understand why the API tests of one project were slow.
  In theory, we designed tests to run in a fully parallel way &ndash; the duration of tests should be close to the longest-running test.
  Unfortunately, the reality was different.
  <strong>Tests took 7x longer than the slowest test without using 100% available resources.</strong></p><p>In this article, I will show you a few techniques to help you understand and optimize your tests execution.
  Optimizing tests that use CPU efficiently is simple (in most cases just add more resources).
  We&rsquo;ll focus on a scenario of optimizing single-threaded, CPU-heavy integration, component, API, and E2E tests.</p><h2 id=its-hard-to-fix-a-problem-that-you-cant-see>It&rsquo;s hard to fix a problem that you can&rsquo;t see</h2><p>It&rsquo;s difficult to understand how tests run from the output generated by <code>go test</code>.
  <strong>You can see how long each test took, but you don&rsquo;t know how long a test waited to run.
    You also can&rsquo;t see how many tests ran in parallel.</strong>
  It becomes even harder when your project has thousands of tests.</p><p><strong>Surprisingly, I didn&rsquo;t find any tool that helps visualize Go test execution.
  As a hobbyist frontend engineer, I decided to build my own over a weekend.</strong></p><h3 id=vgthttpsgithubcomroblaszczakvgt-the-missing-tool-for-visualizing-go-tests><a href=https://github.com/roblaszczak/vgt target=_blank><code>vgt</code></a> the missing tool for Visualizing Go Tests</h3><p><a href=https://github.com/roblaszczak/vgt target=_blank><code>vgt</code></a> can parse JSON Go test output to create a visualization.
  The quickest way to use it is by calling:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go <span class=nb>test</span> -json ./... <span class=p>|</span> go run github.com/roblaszczak/vgt@latest
</span></span></code></pre></div><p>or by installing and running</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go install -u github.com/roblaszczak/vgt
</span></span><span class=line><span class=cl>go <span class=nb>test</span> -json ./... <span class=p>|</span> vgt
</span></span></code></pre></div><p>In a perfect world, this is how ideal test execution of tests that are not CPU-bound should look:</p><figure class=img-center role=group aria-describedby="caption-All non-CPU bound tests are executed in parallel. Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt1.png class=glightbox data-glightbox="description: .caption-All-non-CPU-bound-tests-are-executed-in-parallel-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2674 height=1456 src=https://threedots.tech/post/go-test-parallelism/vgt1_hu1de67792d4d0b303b23c10a8c0cf8eff_269482_2674x1456_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt1_hu1de67792d4d0b303b23c10a8c0cf8eff_269482_2674x1456_resize_lanczos_3.png"'></a><figcaption id="caption-All non-CPU bound tests are executed in parallel. Output from vgt." class=caption-All-non-CPU-bound-tests-are-executed-in-parallel-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>All non-CPU bound tests are executed in parallel. Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><p>Each bar represents the test execution time of a single test or subtest.
  Unfortunately, the tests I was recently debugging looked more like this:</p><figure class=img-center role=group aria-describedby="caption-These tests can be optimized. Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt2.png class=glightbox data-glightbox="description: .caption-These-tests-can-be-optimized-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2674 height=1456 src=https://threedots.tech/post/go-test-parallelism/vgt2_hu1de67792d4d0b303b23c10a8c0cf8eff_254560_2674x1456_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt2_hu1de67792d4d0b303b23c10a8c0cf8eff_254560_2674x1456_resize_lanczos_3.png"'></a><figcaption id="caption-These tests can be optimized. Output from vgt." class=caption-These-tests-can-be-optimized-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>These tests can be optimized. Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><p>While the CPU was not fully used, tests ran one by one.
  It is also a good sign: we have a big room for improvement.</p><h2 id=parallelizing-go-tests>Parallelizing Go tests</h2><p>By default, in Go all tests within a single package are run sequentially.
  <strong>This is not a problem when tests use all CPU cores efficiently and tests are split into multiple packages.
    But our CPU wastes cycles when a database query, API call, or sleep blocks tests &ndash; especially if we have a lot of tests in a single package.</strong></p><figure class=img-center role=group aria-describedby="caption-Tests without t.Parallel() flag. Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt-no-parallel.png class=glightbox data-glightbox="description: .caption-Tests-without-tParallel-flag-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2672 height=1456 src=https://threedots.tech/post/go-test-parallelism/vgt-no-parallel_huae1fbf201fd4c69a0b320230e413e2e4_173838_2672x1456_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt-no-parallel_huae1fbf201fd4c69a0b320230e413e2e4_173838_2672x1456_resize_lanczos_3.png"'></a><figcaption id="caption-Tests without t.Parallel() flag. Output from vgt." class=caption-Tests-without-tParallel-flag-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>Tests without t.Parallel() flag. Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><p>To fix this problem, <a href=https://pkg.go.dev/testing#T target=_blank><code>*testing.T</code></a> provides the <a href=https://pkg.go.dev/testing#T.Parallel target=_blank><code>t.Parallel()</code></a> method,
  which allows tests and sub-tests to run in parallel.</p><div class="notice warning"><div class=notice-head><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M10 1 1 18h18L10 1zm0 6v6" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/><circle cx="10" cy="15.5" r="1" fill="currentcolor"/></svg><p>Warning</p></div><div class=notice-body><p><p><code>t.Parallel()</code> is not a silver bullet and should be used with caution.</p><p><strong>Use <code>t.Parallel()</code> only for tests that have blocking operations like database queries, API calls, sleeps.</strong>
  It can also make sense for CPU-heavy tests using only a single-core.</p><p>For fast unit tests the overhead of using <code>t.Parallel()</code> will be higher than running them sequentially.
  <strong>In other words, using <code>t.Parallel()</code> for lightweight unit tests will likely make them slower.</strong></p></p></div></div><h3 id=parallelism-limit>Parallelism limit</h3><p>Even if you use <code>t.Parallel()</code>, it doesn&rsquo;t mean that all tests will run in parallel.
  To simulate this scenario, I wrote an example test that will simulate 100 tests doing API calls.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestApi_parallel_subtests</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>t</span><span class=p>.</span><span class=nf>Parallel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=mi>100</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=nx>t</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;subtest_%d&#34;</span><span class=p>,</span> <span class=nx>i</span><span class=p>),</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>t</span><span class=p>.</span><span class=nf>Parallel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>          <span class=nf>simulateSlowCall</span><span class=p>(</span><span class=mi>1</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>simulateSlowCall</span><span class=p>(</span><span class=nx>sleepTime</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Duration</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=nx>sleepTime</span> <span class=o>+</span> <span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nf>Duration</span><span class=p>(</span><span class=nx>rand</span><span class=p>.</span><span class=nf>Intn</span><span class=p>(</span><span class=mi>1000</span><span class=p>))</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Millisecond</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>As long as the target server is not overloaded and tests are appropriately designed,
  we should be able to run all tests in parallel.
  <strong>In this case, running all tests should take at most 2 seconds.
    But it took over 16 seconds instead.</strong></p><p>Despite using <code>t.Parallel()</code>, the execution graph shows many gray bars representing pauses.
  Tests marked as <code>PAUSED</code> are limited due to the parallelism limit.</p><figure class=img-center role=group aria-describedby="caption-These tests can be optimized. Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt-parallel-limit.png class=glightbox data-glightbox="description: .caption-These-tests-can-be-optimized-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2692 height=1456 src=https://threedots.tech/post/go-test-parallelism/vgt-parallel-limit_huc04bfd19741158cd65b05785253e3246_882845_2692x1456_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt-parallel-limit_huc04bfd19741158cd65b05785253e3246_882845_2692x1456_resize_lanczos_3.png"'></a><figcaption id="caption-These tests can be optimized. Output from vgt." class=caption-These-tests-can-be-optimized-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>These tests can be optimized. Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><p>First, let&rsquo;s understand how tests with <code>t.Parallel()</code> run. If you&rsquo;re curious, you can check the
  source code of the <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.23.1:src/testing/testing.go;l=1800" target=_blank><code>testing</code></a> package.
  What&rsquo;s important, test parallelism is set to <code>runtime.GOMAXPROCS(0)</code> by default, which returns the number of cores reported by the OS.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>parallel</span> <span class=p>=</span> <span class=nx>flag</span><span class=p>.</span><span class=nf>Int</span><span class=p>(</span><span class=s>&#34;test.parallel&#34;</span><span class=p>,</span> <span class=nx>runtime</span><span class=p>.</span><span class=nf>GOMAXPROCS</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span> <span class=s>&#34;run at most `n` tests in parallel&#34;</span><span class=p>)</span>
</span></span></code></pre></div><div class="text-center -mt-5 mb-5 fs-sm hidden mb:block">Full source: <a href="https://cs.opensource.google/go/go/+/refs/tags/go1.23.1:src/testing/testing.go;l=442" target=_blank>cs.opensource.google/go/go/+/refs/tags/go1.23.1:src/testing/testing.go;l=442</a></div><div class="text-center -mt-5 mb-5 fs-sm mb:hidden block"><a href="https://cs.opensource.google/go/go/+/refs/tags/go1.23.1:src/testing/testing.go;l=442" target=_blank>Full source</a></div><p>On my Macbook, <code>runtime.GOMAXPROCS(0)</code> returns 10 (as I have a 10-core CPU).
  <strong>In other words, it limits tests run in parallel to 10.</strong></p><p>Limiting tests to the number of our cores makes sense when they are CPU-bound.
  More parallelism will force our OS to do more expensive context switching.
  But when we are calling a database,
  API, or any blocking I/O, it makes tests longer without fully using our resources.</p><p>The situation can be even worse when API tests run in CI against an environment deployed in a separate VM or cloud.
  Often, CI runners for API tests may have 1-2 CPUs.
  With 1 vCPU, API tests will run one by one. We can simulate this by setting the env <code>GOMAXPROCS=1</code>.</p><figure class=img-center role=group aria-describedby="caption-Tests with 1 vCPU &ndash; this is how it may look in CI. Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt-maxproc1.png class=glightbox data-glightbox="description: .caption-Tests-with-1-vCPU----this-is-how-it-may-look-in-CI-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2492 height=1444 src=https://threedots.tech/post/go-test-parallelism/vgt-maxproc1_hu3ffbddc5f30f178cd5f094933617fcd3_602246_2492x1444_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt-maxproc1_hu3ffbddc5f30f178cd5f094933617fcd3_602246_2492x1444_resize_lanczos_3.png"'></a><figcaption id="caption-Tests with 1 vCPU &ndash; this is how it may look in CI. Output from vgt." class=caption-Tests-with-1-vCPU----this-is-how-it-may-look-in-CI-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>Tests with 1 vCPU &ndash; this is how it may look in CI. Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><p>Parallelism is effectively set to 1, so we see a lot of gray bars representing waiting time.
  To fix this problem, we can use the <code>-parallel</code> (or <code>-test.parallel</code> &ndash; they have the same effect) flag.
  <a href=https://pkg.go.dev/cmd/go/internal/test target=_blank>Go documentation says</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>    -parallel n
</span></span><span class=line><span class=cl>        Allow parallel execution of test functions that call t.Parallel, and
</span></span><span class=line><span class=cl>        fuzz targets that call t.Parallel when running the seed corpus.
</span></span><span class=line><span class=cl>        The value of this flag is the maximum number of tests to run
</span></span><span class=line><span class=cl>        simultaneously.
</span></span><span class=line><span class=cl>        While fuzzing, the value of this flag is the maximum number of
</span></span><span class=line><span class=cl>        subprocesses that may call the fuzz function simultaneously, regardless of
</span></span><span class=line><span class=cl>        whether T.Parallel is called.
</span></span><span class=line><span class=cl>        By default, -parallel is set to the value of GOMAXPROCS.
</span></span><span class=line><span class=cl>        Setting -parallel to values higher than GOMAXPROCS may cause degraded
</span></span><span class=line><span class=cl>        performance due to CPU contention, especially when fuzzing.
</span></span><span class=line><span class=cl>        Note that -parallel only applies within a single test binary.
</span></span><span class=line><span class=cl>        The &#39;go test&#39; command may run tests for different packages
</span></span><span class=line><span class=cl>        in parallel as well, according to the setting of the -p flag
</span></span><span class=line><span class=cl>        (see &#39;go help build&#39;).
</span></span></code></pre></div><div class="notice tip"><div class=notice-head><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillrule="evenodd" cliprule="evenodd" d="M12 0c6.6274.0 12 5.37258 12 12 0 6.6274-5.3726 12-12 12C5.37258 24 0 18.6274.0 12 0 5.37258 5.37258.0 12 0zm0 2.4C6.69807 2.4 2.4 6.69807 2.4 12c0 5.3019 4.29807 9.6 9.6 9.6 5.3019.0 9.6-4.2981 9.6-9.6.0-5.30193-4.2981-9.6-9.6-9.6zm3.9515 5.15147L9.6 13.9029 8.04853 12.3515C7.5799 11.8828 6.8201 11.8828 6.35147 12.3515c-.46863.4686-.46863 1.2284.0 1.697l2.4 2.4C9.2201 16.9172 9.9799 16.9172 10.4485 16.4485l7.2-7.19997C18.1172 8.7799 18.1172 8.0201 17.6485 7.55147c-.468599999999999-.46863-1.2284-.46863-1.697.0z" fill="currentcolor"/></svg><p>Tip</p></div><div class=notice-body><p><p>Don&rsquo;t change <code>GOMACPROCS</code> to a value higher than the available cores to force more parallelism.</p><p>It will have more effects than just on tests — it will spawn more Go threads than cores. It will lead to more expensive context switching and may slow down CPU-bound tests.</p></p></div></div><p>Let&rsquo;s see how the same test will behave with the extra <code>-parallel 100</code> flag:</p><figure class=img-center role=group aria-describedby="caption-go test ./&mldr; -json -parallel=100 | vgt"><a href=https://threedots.tech/post/go-test-parallelism/vgt-parallel.png class=glightbox data-glightbox="description: .caption-go-test---json--parallel100--vgt"><img title loading=lazy decoding=async class="img img-wide" width=2492 height=1444 src=https://threedots.tech/post/go-test-parallelism/vgt-parallel_hu3ffbddc5f30f178cd5f094933617fcd3_568984_2492x1444_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt-parallel_hu3ffbddc5f30f178cd5f094933617fcd3_568984_2492x1444_resize_lanczos_3.png"'></a><figcaption id="caption-go test ./&mldr; -json -parallel=100 | vgt" class=caption-go-test---json--parallel100--vgt>go test ./&mldr; -json -parallel=100 | vgt</figcaption></figure><p>We achieved our goal - all tests run in parallel.
  <strong>Our tests were not CPU-bound, so the overall execution time can be as long as the slowest executed test.</strong></p><div class="notice tip"><div class=notice-head><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillrule="evenodd" cliprule="evenodd" d="M12 0c6.6274.0 12 5.37258 12 12 0 6.6274-5.3726 12-12 12C5.37258 24 0 18.6274.0 12 0 5.37258 5.37258.0 12 0zm0 2.4C6.69807 2.4 2.4 6.69807 2.4 12c0 5.3019 4.29807 9.6 9.6 9.6 5.3019.0 9.6-4.2981 9.6-9.6.0-5.30193-4.2981-9.6-9.6-9.6zm3.9515 5.15147L9.6 13.9029 8.04853 12.3515C7.5799 11.8828 6.8201 11.8828 6.35147 12.3515c-.46863.4686-.46863 1.2284.0 1.697l2.4 2.4C9.2201 16.9172 9.9799 16.9172 10.4485 16.4485l7.2-7.19997C18.1172 8.7799 18.1172 8.0201 17.6485 7.55147c-.468599999999999-.46863-1.2284-.46863-1.697.0z" fill="currentcolor"/></svg><p>Tip</p></div><div class=notice-body><p><p>If you are not changing the test code and want to test their performance, Go may cache them.</p><p>To avoid caching, run them with the <code>-count=1</code> flag, for example <code>go test ./... -json -count=1 -parallel=100 | vgt</code>.</p></p></div></div><h2 id=tests-in-multiple-packages>Tests in multiple packages</h2><p>Using the <code>-parallel</code> flag is not the only thing we can do to speed up tests.
  It&rsquo;s not uncommon to store tests in multiple packages.
  <strong>By default, Go limits how many packages can run simultaneously to the number of cores.</strong>
  Let&rsquo;s look at the example project structure:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ls ./tests/*
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>./tests/package_1:
</span></span><span class=line><span class=cl>api_test.go
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>./tests/package_2:
</span></span><span class=line><span class=cl>api_test.go
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>./tests/package_3:
</span></span><span class=line><span class=cl>api_test.go
</span></span></code></pre></div><p>Usually, we may have many more packages with tests for more complex projects.
  For readability, let&rsquo;s simulate how tests will run on one CPU (for example, in a CI runner with 1 core):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>GOMAXPROCS</span><span class=o>=</span><span class=m>1</span> go <span class=nb>test</span> ./tests/... -parallel <span class=m>100</span> -json <span class=p>|</span> vgt
</span></span></code></pre></div><figure class=img-center role=group aria-describedby="caption-Running tests on a runner with 1 core with 3 packages. . Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt-multi-pkg.png class=glightbox data-glightbox="description: .caption-Running-tests-on-a-runner-with-1-core-with-3-packages--Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2716 height=1444 src=https://threedots.tech/post/go-test-parallelism/vgt-multi-pkg_hu2eb304ff1ae41954eb2f22c62533bb11_254571_2716x1444_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt-multi-pkg_hu2eb304ff1ae41954eb2f22c62533bb11_254571_2716x1444_resize_lanczos_3.png"'></a><figcaption id="caption-Running tests on a runner with 1 core with 3 packages. . Output from vgt." class=caption-Running-tests-on-a-runner-with-1-core-with-3-packages--Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>Running tests on a runner with 1 core with 3 packages. . Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><p>You can see that every package runs separately. We can fix this with the <code>-p</code> flag.
  <strong>It may not be a problem if your tests run on machines with multiple cores
    and you don&rsquo;t have many packages with long-running tests.</strong>
  But in our scenario, with CI and one core, we need to specify the <code>-p</code> flag.
  It will allow up to 16 packages to run in parallel.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>GOMAXPROCS</span><span class=o>=</span><span class=m>1</span> go <span class=nb>test</span> ./tests/... -parallel <span class=m>128</span> -p <span class=m>16</span> -json <span class=p>|</span> vgt
</span></span></code></pre></div><figure class=img-center role=group aria-describedby="caption-Running tests on a runner with 1 core with 3 packages. Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt-multi-pkg-p.png class=glightbox data-glightbox="description: .caption-Running-tests-on-a-runner-with-1-core-with-3-packages-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2716 height=1444 src=https://threedots.tech/post/go-test-parallelism/vgt-multi-pkg-p_hu2eb304ff1ae41954eb2f22c62533bb11_256669_2716x1444_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt-multi-pkg-p_hu2eb304ff1ae41954eb2f22c62533bb11_256669_2716x1444_resize_lanczos_3.png"'></a><figcaption id="caption-Running tests on a runner with 1 core with 3 packages. Output from vgt." class=caption-Running-tests-on-a-runner-with-1-core-with-3-packages-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>Running tests on a runner with 1 core with 3 packages. Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><p>Now, the entire execution time is very close to the longest test duration.</p><div class="notice tip"><div class=notice-head><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillrule="evenodd" cliprule="evenodd" d="M12 0c6.6274.0 12 5.37258 12 12 0 6.6274-5.3726 12-12 12C5.37258 24 0 18.6274.0 12 0 5.37258 5.37258.0 12 0zm0 2.4C6.69807 2.4 2.4 6.69807 2.4 12c0 5.3019 4.29807 9.6 9.6 9.6 5.3019.0 9.6-4.2981 9.6-9.6.0-5.30193-4.2981-9.6-9.6-9.6zm3.9515 5.15147L9.6 13.9029 8.04853 12.3515C7.5799 11.8828 6.8201 11.8828 6.35147 12.3515c-.46863.4686-.46863 1.2284.0 1.697l2.4 2.4C9.2201 16.9172 9.9799 16.9172 10.4485 16.4485l7.2-7.19997C18.1172 8.7799 18.1172 8.0201 17.6485 7.55147c-.468599999999999-.46863-1.2284-.46863-1.697.0z" fill="currentcolor"/></svg><p>Tip</p></div><div class=notice-body><p><p>It&rsquo;s hard to give <code>-parallel</code> and <code>-p</code> values that will work for all projects.
  It depends a lot on your types of tests and how they are structured.
  The default value will work fine for many lightweight unit tests or
  CPU-bound tests that efficiently use multiple cores.</p><p>The best way to find the correct <code>-parallel</code> flag is to experiment with different values.
  <a href=https://github.com/roblaszczak/vgt target=_blank><code>vgt</code></a> may be helpful in understanding how different values affect test execution.</p></p></div></div><h3 id=parallelism-with-sub-tests-and-test-tables>Parallelism with sub-tests and test tables</h3><p>Using test tables for tests in Go is very useful when you need to test many
  input parameters for a function.
  On the other hand, they have a couple of dangers: creating test tables may sometimes be
  more complex than just copying the test body multiple times.</p><p><strong>Using test tables can also affect the performance of our tests a lot if we forget to add <code>t.Parallel()</code>.</strong>
  This is especially visible for test tables with a lot of slow test cases.
  Even one use of test table can make our tests considerably slower.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestApi_with_test_table</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>t</span><span class=p>.</span><span class=nf>Parallel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>testCases</span> <span class=o>:=</span> <span class=p>[]</span><span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=nx>Name</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>       <span class=nx>API</span>  <span class=kt>string</span>
</span></span><span class=line><span class=cl>    <span class=p>}{</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;1&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/1&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;2&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/2&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;3&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/3&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;4&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/4&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;5&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/5&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;6&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/6&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;7&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/7&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;8&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/8&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;9&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/9&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;10&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/9&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;11&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/1&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;12&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/2&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;13&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/3&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;14&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/4&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;15&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/5&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;16&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/6&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;17&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/7&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;18&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/8&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>       <span class=p>{</span><span class=nx>Name</span><span class=p>:</span> <span class=s>&#34;19&#34;</span><span class=p>,</span> <span class=nx>API</span><span class=p>:</span> <span class=s>&#34;/api/9&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=nx>i</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>testCases</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=nx>t</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=nx>tc</span><span class=p>.</span><span class=nx>Name</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>t</span><span class=p>.</span><span class=nf>Parallel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>          <span class=nf>simulateSlowCall</span><span class=p>(</span><span class=mi>1</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><figure class=img-center role=group aria-describedby="caption-Using a test table without t.Parallel(). Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt-test-table.png class=glightbox data-glightbox="description: .caption-Using-a-test-table-without-tParallel-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2534 height=1444 src=https://threedots.tech/post/go-test-parallelism/vgt-test-table_huc1c09de7476ad6cf6416ad99d72c35cf_165401_2534x1444_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt-test-table_huc1c09de7476ad6cf6416ad99d72c35cf_165401_2534x1444_resize_lanczos_3.png"'></a><figcaption id="caption-Using a test table without t.Parallel(). Output from vgt." class=caption-Using-a-test-table-without-tParallel-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>Using a test table without t.Parallel(). Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><p>The solution is simple: add <code>t.Parallel()</code> to the test table.
  But it&rsquo;s easy to forget about it.
  We can be careful when using test tables.
  But being careful doesn&rsquo;t always work in the real world when you&rsquo;re in a hurry.
  We need an automated way to ensure that <code>t.Parallel()</code> is not missed.</p><h3 id=linting-if-tparallel-is-used>Linting if <code>t.Parallel()</code> is used</h3><p>In most projects, we use <a href=https://golangci-lint.run/ target=_blank><code>golangci-lint</code></a>.
  It allows you to configure multiple linters and set them up for the entire project.</p><p>We can configure which linter should be enabled based on the file name.
  An example configuration will ensure all tests in files ending with <code>_api_test.go</code> or <code>_integ_test.go</code> are using <code>t.Parallel()</code>.
  Unfortunately, as a downside, it requires keeping a convention in naming test files.</p><div class="notice tip"><div class=notice-head><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillrule="evenodd" cliprule="evenodd" d="M12 0c6.6274.0 12 5.37258 12 12 0 6.6274-5.3726 12-12 12C5.37258 24 0 18.6274.0 12 0 5.37258 5.37258.0 12 0zm0 2.4C6.69807 2.4 2.4 6.69807 2.4 12c0 5.3019 4.29807 9.6 9.6 9.6 5.3019.0 9.6-4.2981 9.6-9.6.0-5.30193-4.2981-9.6-9.6-9.6zm3.9515 5.15147L9.6 13.9029 8.04853 12.3515C7.5799 11.8828 6.8201 11.8828 6.35147 12.3515c-.46863.4686-.46863 1.2284.0 1.697l2.4 2.4C9.2201 16.9172 9.9799 16.9172 10.4485 16.4485l7.2-7.19997C18.1172 8.7799 18.1172 8.0201 17.6485 7.55147c-.468599999999999-.46863-1.2284-.46863-1.697.0z" fill="currentcolor"/></svg><p>Tip</p></div><div class=notice-body><p>Alternatively, you can group your tests by type in multiple packages.
  So, one package can contain API tests, and another can contain integration tests.</p></div></div><div class="notice note"><div class=notice-head><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 9v5m0 5c-4.97056.0-9-4.0294-9-9 0-4.97056 4.02944-9 9-9 4.9706.0 9 4.02944 9 9 0 4.9706-4.0294 9-9 9zM10.0498 6V6.1L9.9502 6.1002V6H10.0498z" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><p>Note</p></div><div class=notice-body><p>As mentioned earlier, it&rsquo;s not only pointless, <strong>but even slower to use <code>t.Parallel()</code> for all kinds of tests.</strong>
  Avoid requiring <code>t.Parallel()</code> for all types of tests.</p></div></div><p>This is an example <code>.golangci.yml</code> configuration:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>run</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>5m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>linters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>enable</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>paralleltest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>issues</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>exclude-rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>path-except</span><span class=p>:</span><span class=w> </span><span class=l>_api_test\.go|_integ_test\.go</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>linters</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>paralleltest</span><span class=w>
</span></span></span></code></pre></div><p>With this config, we can run the linter:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ golangci-lint run
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>package_1/some_api_test.go:9:1: Function TestApi_with_test_table missing the call to method parallel <span class=o>(</span>paralleltest<span class=o>)</span>
</span></span><span class=line><span class=cl>func TestApi_with_test_table<span class=o>(</span>t *testing.T<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>^
</span></span></code></pre></div><p>You can find a reference for configuration in <a href=https://golangci-lint.run/usage/configuration/ target=_blank>golangci-lint docs</a>.</p><div class="notice tip"><div class=notice-head><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillrule="evenodd" cliprule="evenodd" d="M12 0c6.6274.0 12 5.37258 12 12 0 6.6274-5.3726 12-12 12C5.37258 24 0 18.6274.0 12 0 5.37258 5.37258.0 12 0zm0 2.4C6.69807 2.4 2.4 6.69807 2.4 12c0 5.3019 4.29807 9.6 9.6 9.6 5.3019.0 9.6-4.2981 9.6-9.6.0-5.30193-4.2981-9.6-9.6-9.6zm3.9515 5.15147L9.6 13.9029 8.04853 12.3515C7.5799 11.8828 6.8201 11.8828 6.35147 12.3515c-.46863.4686-.46863 1.2284.0 1.697l2.4 2.4C9.2201 16.9172 9.9799 16.9172 10.4485 16.4485l7.2-7.19997C18.1172 8.7799 18.1172 8.0201 17.6485 7.55147c-.468599999999999-.46863-1.2284-.46863-1.697.0z" fill="currentcolor"/></svg><p>Tip</p></div><div class=notice-body><p><p>Not all tests can always run in parallel. In this case, you can disable the linter for this specific test with <code>//nolint:paralleltest</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>//nolint:paralleltest
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>SomeTest</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//nolint:paralleltest
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>t</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=s>&#34;some_sub_test&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></p></div></div><h2 id=parallelism-quirks-does-grouping-tests-with-trun-affect-performance>Parallelism quirks: does grouping tests with <code>t.Run()</code> affect performance?</h2><p>I&rsquo;ve often seen in many projects a convention of grouping tests with <code>t.Run()</code>.
  Have you ever wondered if it affects performance in any way?</p><p>To check this hypothesis, I wrote 50 tests like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestApi1</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>t</span><span class=p>.</span><span class=nf>Parallel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>t</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=s>&#34;1&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=nx>t</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=s>&#34;1&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>t</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=s>&#34;1&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>             <span class=nf>simulateSlowCall</span><span class=p>(</span><span class=mi>1</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>})</span>
</span></span><span class=line><span class=cl>       <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>t</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=s>&#34;2&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=nx>t</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=s>&#34;2&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>t</span><span class=p>.</span><span class=nf>Run</span><span class=p>(</span><span class=s>&#34;2&#34;</span><span class=p>,</span> <span class=kd>func</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>             <span class=nf>simulateSlowCall</span><span class=p>(</span><span class=mi>1</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>})</span>
</span></span><span class=line><span class=cl>       <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>simulateSlowCall</span><span class=p>(</span><span class=nx>sleepTime</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Duration</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// for more reliable results I&#39;m using constant time here
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=nx>sleepTime</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>To compare, I also wrote 50 tests without using <code>t.Run()</code> for subtests:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestApi1</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nx>t</span><span class=p>.</span><span class=nf>Parallel</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>simulateSlowCall</span><span class=p>(</span><span class=mi>1</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>simulateSlowCall</span><span class=p>(</span><span class=mi>1</span> <span class=o>*</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>simulateSlowCall</span><span class=p>(</span><span class=nx>sleepTime</span> <span class=nx>time</span><span class=p>.</span><span class=nx>Duration</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=c1>// for more reliable results I&#39;m using constant time here
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=nx>sleepTime</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Does it affect test performance by affecting parallelism in any way?
  Let&rsquo;s see what <code>vgt</code> will show us.</p><figure class=img-center role=group aria-describedby="caption-Tests without using r.Run() for subtests. Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt-no-subtests.png class=glightbox data-glightbox="description: .caption-Tests-without-using-rRun-for-subtests-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2524 height=1444 src=https://threedots.tech/post/go-test-parallelism/vgt-no-subtests_hub25189b661e397d4d4a812c604fb3bce_366417_2524x1444_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt-no-subtests_hub25189b661e397d4d4a812c604fb3bce_366417_2524x1444_resize_lanczos_3.png"'></a><figcaption id="caption-Tests without using r.Run() for subtests. Output from vgt." class=caption-Tests-without-using-rRun-for-subtests-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>Tests without using r.Run() for subtests. Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><figure class=img-center role=group aria-describedby="caption-Tests using r.Run() for subtests. Output from vgt."><a href=https://threedots.tech/post/go-test-parallelism/vgt-subtests.png class=glightbox data-glightbox="description: .caption-Tests-using-rRun-for-subtests-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta"><img title loading=lazy decoding=async class="img img-wide" width=2524 height=1444 src=https://threedots.tech/post/go-test-parallelism/vgt-subtests_hub25189b661e397d4d4a812c604fb3bce_422518_2524x1444_resize_q80_h2_lanczos_3.webp alt="vgt cli tool" onerror='this.onerror="null",this.src="/post/go-test-parallelism/vgt-subtests_hub25189b661e397d4d4a812c604fb3bce_422518_2524x1444_resize_lanczos_3.png"'></a><figcaption id="caption-Tests using r.Run() for subtests. Output from vgt." class=caption-Tests-using-rRun-for-subtests-Output-from-a-hrefhttpsgithubcomroblaszczakvgt-targetblankvgta>Tests using r.Run() for subtests. Output from <a href=https://github.com/roblaszczak/vgt target=_blank>vgt</a>.</figcaption></figure><p>Despite the chart looking a bit uglier, execution times are the same for grouped and non-grouped tests.
  <strong>In other words, grouping tests with <code>t.Run()</code> does not affect performance.</strong></p><h2 id=summary>Summary</h2><p><strong>Having fast and reliable tests for efficient development is crucial.
  But over the years, I&rsquo;ve learned that reality is not always so simple.
  There is always more work to do, and tests are not something that our product&rsquo;s users or boss directly see.</strong>
  On the other hand, a small investment in tests can save a lot of time in the future.
  Reliable and fast tests are one of the best investments in your project&rsquo;s return on investment (ROI).</p><p>Knowing some tactics to convince your team leader or manager
  to find time to improve tests is useful.
  <strong>It&rsquo;s helpful to think in terms that your manager or boss uses.
    You should consider the benefits they care about.</strong>
  Reducing delivery time - you can even calculate how many minutes per month the entire team wastes by waiting for tests or retrying them.
  It may be useful to multiply this by the average developer&rsquo;s salary.
  It&rsquo;s also helpful to track bugs shipped to production because tests were so flaky that nobody noticed them.</p><p>There are more ways to make your tests more useful.
  I&rsquo;ve also observed that people often struggle with naming different types of tests &ndash; we will give you some hints about that, too.
  If you are interested in more articles about testing, check out:</p><ul><li><a href=https://threedots.tech/post/database-integration-testing/>4 practical principles of high-quality database integration tests in Go</a></li><li><a href=https://threedots.tech/post/microservices-test-architecture/>Microservices test architecture</a></li></ul><p><strong>Is <a href=https://github.com/roblaszczak/vgt target=_blank><code>vgt</code></a> useful for you?
  Don&rsquo;t forget to give it a star on GitHub and share it with your friends or social media!</strong></p></div></article><div><div id=newsletter-footer class="rounded-lg px-7 py-7 text-center row justify-content"><div class="mx-auto mb-0 text-center lg:col-7"><h2 class=mb-4>Did you like this article?</h2><p>We work on a lot of new useful content.
  We can let you know when a new post appears.
  Your e-mail will be safe and not shared with anyone. 🔒<br><br>You will also receive a free <a href=https://threedots.tech/go-with-the-domain/>"Go With The Domain" e-book</a>!</p></div><a href=https://threedots.tech/go-with-the-domain/><div class="book-container book-big"><div class=book><div class=front><div class="cover img-crisp-edges"><img loading decoding=async src=https://threedots.tech/img/go-with-domain-cover-retina.jpg alt=Cover class="rounded-full inline img" height=424 width=300></div></div><div class=left-side><h2><span>Go With The Domain</span>
  <span>Three Dots Labs</span></h2></div></div></div></a><div id=newsletter-content class="admonition-content newsletter row mb-10"><div id=mlb2-199774120 class="ml-form-embedContainer ml-subscribe-form ml-subscribe-form-199774120 formkit-form mx-auto"><form class="ml-block-form md:col-10 lg:col-6 mx-auto text-center" action=https://assets.mailerlite.com/jsonp/1209776/forms/139592997332322260/subscribe data-code method=post target=_blank onsubmit=subscribedToNewsletter()><div class="ml-form-error notice warning" style=display:none><div class=notice-body><p>Failed to subscribe, please try again later.</p></div></div><div class=ml-form-formContent><div class="ml-form-fieldRow ml-last-item mb-6"><div class="ml-field-group ml-field-name ml-validate-required"><input aria-label=name aria-required=true type=text class="form-control form-input" data-inputmask name=fields[name] placeholder="Your name" autocomplete=given-name></div></div><div class="ml-form-fieldRow mb-6"><div class="ml-field-group ml-field-email ml-validate-email ml-validate-required"><input aria-label=email aria-required=true type=email class="form-control form-input" data-inputmask name=fields[email] placeholder=E-mail autocomplete=email></div></div></div><input type=hidden name=fields[ref_url] value=https://threedots.tech/post/go-test-parallelism/>
  <input type=hidden name=fields[form] value=blog-footer>
  <input type=hidden name=fields[blog_tags] value=go;golang;testing;parallelism>
  <input type=hidden name=fields[blog_series]>
  <input type=hidden name=ml-submit value=1><div class="ml-form-embedSubmit btn btn-primary rounded"><button type=submit class=primary>
    Subscribe
    <svg class="arrow-right icon w-4 ml-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9.0L441 239c9.4 9.4 9.4 24.6.0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9.0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3.0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"/></svg></button>
    <button disabled style=display:none type=button class=loading>
      <span class=ml-form-embedSubmitLoad></span>
      <span class=sr-only>Loading...</span></button></div><input type=hidden name=anticsrf value=true></form></div></div><script>function ml_webform_success_199774120(){window.top.location.href="/mailing/confirmation-required/"}</script><script>window.onload=function(){fetch("https://assets.mailerlite.com/jsonp/1209776/forms/139592997332322260/takel")}</script></div><div class="row items-start justify-between"><div class="lg:col-6 mb-2 flex items-center lg:mb-0"><h5 class=mr-3>Tags:</h5><ul><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=https://threedots.tech/tags/go/>go</a></li><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=https://threedots.tech/tags/golang/>golang</a></li><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=https://threedots.tech/tags/testing/>testing</a></li><li class=inline-block><a class="bg-theme-light hover:bg-primary dark:bg-darkmode-theme-light dark:hover:bg-darkmode-primary dark:hover:text-dark m-1 block rounded px-3 py-1 hover:text-white" href=https://threedots.tech/tags/parallelism/>parallelism</a></li></ul></div><div class="lg:col-6 flex xl:justify-end"><div class=share-icons><h5 class=share-title>Share :</h5><a class="share-link share-facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fthreedots.tech%2fpost%2fgo-test-parallelism%2f" target=_blank rel=noopener aria-label="share facebook"><span class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg></span></a><a class="share-link share-twitter" href="https://twitter.com/intent/tweet/?text=Share&amp;url=https%3a%2f%2fthreedots.tech%2fpost%2fgo-test-parallelism%2f" target=_blank rel=noopener aria-label="share twitter"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 2H1l8.26 11.015L1.45 22H4.1l6.388-7.349L16 22h7l-8.608-11.478L21.8 2h-2.65l-5.986 6.886zm9 18L5 4h2l12 16z"/></svg></span></a><a class="share-link share-email" href="mailto:?subject=Share&amp;body=https%3a%2f%2fthreedots.tech%2fpost%2fgo-test-parallelism%2f" target=_self rel=noopener aria-label="share email"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9.0 6v12c0 1.1.9 2 2 2h20c1.1.0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17.0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1.0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08.0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg></span></a><a class="share-link share-reddit" href="https://reddit.com/submit/?url=https%3a%2f%2fthreedots.tech%2fpost%2fgo-test-parallelism%2f&amp;resubmit=true&amp;title=Share" target=_blank rel=noopener aria-label="share reddit"><span aria-hidden=true class=share-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M24 11.5c0-1.65-1.35-3-3-3-.96.0-1.86.48-2.42 1.24-1.64-1-3.75-1.64-6.07-1.72.08-1.1.4-3.05 1.52-3.7.72-.4 1.73-.24 3 .5C17.2 6.3 18.46 7.5 20 7.5c1.65.0 3-1.35 3-3s-1.35-3-3-3c-1.38.0-2.54.94-2.88 2.22-1.43-.72-2.64-.8-3.6-.25-1.64.94-1.95 3.47-2 4.55-2.33.08-4.45.7-6.1 1.72C4.86 8.98 3.96 8.5 3 8.5c-1.65.0-3 1.35-3 3 0 1.32.84 2.44 2.05 2.84-.03.22-.05.44-.05.66.0 3.86 4.5 7 10 7s10-3.14 10-7c0-.22-.02-.44-.05-.66 1.2-.4 2.05-1.54 2.05-2.84zM2.3 13.37C1.5 13.07 1 12.35 1 11.5c0-1.1.9-2 2-2 .64.0 1.22.32 1.6.82-1.1.85-1.92 1.9-2.3 3.05zm3.7.13c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9.8 4.8c-1.08.63-2.42.96-3.8.96-1.4.0-2.74-.34-3.8-.95-.24-.13-.32-.44-.2-.68.15-.24.46-.32.7-.18 1.83 1.06 4.76 1.06 6.6.0.23-.13.53-.05.67.2.14.23.06.54-.18.67zm.2-2.8c-1.1.0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5.7-2.13c-.38-1.16-1.2-2.2-2.3-3.05.38-.5.97-.82 1.6-.82 1.1.0 2 .9 2 2 0 .84-.53 1.57-1.3 1.87z"/></svg></span></a></div></div><div class="lg:col-6 mb-10 flex items-center lg:mb-0"><h5 class=mr-3>Last update:</h5><ul><li class="inline-block mt-1">October 17, 2024</li></ul></div></div><div class=mt-20><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){},disqus_observer=new IntersectionObserver(function(e){e[0].isIntersecting&&(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//three-dots-tech.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}(),disqus_observer.disconnect())},{threshold:[0]});disqus_observer.observe(document.querySelector("#disqus_thread"))</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><div class="section pb-0 related-posts"><h2 class="h3 mb-12">Related Posts</h2><div class=row><div class=lg:col-6><div class="bg-body dark:bg-darkmode-body"><div class=text-center><img src=https://threedots.tech/media/running-integration-tests-on-google-cloud-build/cover_hu7a5b5d5cc96d9ada230aeb87ed5b9159_101737_999x999_resize_q80_h2_lanczos.webp loading=lazy srcset="https://threedots.tech/media/running-integration-tests-on-google-cloud-build/cover_hu7a5b5d5cc96d9ada230aeb87ed5b9159_101737_999x999_resize_q80_h2_lanczos.webp 1x, https://threedots.tech/media/running-integration-tests-on-google-cloud-build/cover_hu7a5b5d5cc96d9ada230aeb87ed5b9159_101737_899x899_resize_q80_h2_lanczos.webp 899w" decoding=async alt="Running integration tests with docker-compose in Google Cloud Build" class="md:w-48 w-9/12 mb-5 md:mb-16 md:ml-5 md:mt-16 md:float-right rounded mt-6 inline-block img" width=999 height=999 onerror='this.onerror="null",this.src="/media/running-integration-tests-on-google-cloud-build/cover_hu7a5b5d5cc96d9ada230aeb87ed5b9159_101737_999x999_resize_q80_lanczos.jpg"'></div><h4 class=mb-3><a href=https://threedots.tech/post/running-integration-tests-on-google-cloud-build/>Running integration tests with docker-compose in Google Cloud Build</a></h4><ul class=mb-4><li class=inline-block><div class="flex flex-row"><div class=shrink-0><a href=https://threedots.tech/about/><div class=mr-3><img src=https://threedots.tech/img/avatars/milosz_huf4c5f8f81db8b46d54d8e7235b065f4a_295311_50x50_resize_q80_h2_lanczos_3.webp loading=lazy srcset="https://threedots.tech/img/avatars/milosz_huf4c5f8f81db8b46d54d8e7235b065f4a_295311_50x50_resize_q80_h2_lanczos_3.webp 1x, https://threedots.tech/img/avatars/milosz_huf4c5f8f81db8b46d54d8e7235b065f4a_295311_100x100_resize_q80_h2_lanczos_3.webp 2x, https://threedots.tech/img/avatars/milosz_huf4c5f8f81db8b46d54d8e7235b065f4a_295311_150x150_resize_q80_h2_lanczos_3.webp 3x, https://threedots.tech/img/avatars/milosz_huf4c5f8f81db8b46d54d8e7235b065f4a_295311_45x45_resize_q80_h2_lanczos_3.webp 45w" decoding=async alt=Avatar class="rounded-full inline img" width=50 height=50 onerror='this.onerror="null",this.src="/img/avatars/milosz_huf4c5f8f81db8b46d54d8e7235b065f4a_295311_50x50_resize_lanczos_3.png"'></div></a></div><div class="m-auto text-slate-800 dark:text-gray-300"><a href=https://threedots.tech/about/><span class="mr-3 font-bold">Miłosz Smółka</span></a></div></div></li></ul><a href=https://threedots.tech/post/running-integration-tests-on-google-cloud-build/><p class="mb-6 text-justify">This post is a direct follow-up to Microservices test architecture where I&rsquo;ve introduced new kinds of tests to our example project.
  Wild Workouts uses Google Cloud Build as CI/CD platform. It&rsquo;s configured in a continuous deployment manner, meaning the changes land on production as soon as the pipeline passes. If you consider our current setup, it&rsquo;s both brave and naive. We have no tests running there that could save us from obvious mistakes (the not-so-obvious mistakes can rarely be caught by tests, anyway).</p><button class="btn btn-outline-primary btn-sm" aria-label="Read 'Running integration tests with docker-compose in Google Cloud Build'">
  Read More</button></a></div></div><div class=lg:col-6><div class="bg-body dark:bg-darkmode-body"><div class=text-center><img src=https://threedots.tech/images/covers/list-of-recommended-libraries_hu0397679280a94b58fae63515b3172745_163836_2500x2500_resize_q80_h2_lanczos_3.webp loading=lazy srcset="https://threedots.tech/images/covers/list-of-recommended-libraries_hu0397679280a94b58fae63515b3172745_163836_2500x2500_resize_q80_h2_lanczos_3.webp 1x, https://threedots.tech/images/covers/list-of-recommended-libraries_hu0397679280a94b58fae63515b3172745_163836_2250x2250_resize_q80_h2_lanczos_3.webp 2250w" decoding=async alt="The Go libraries that never failed us: 22 libraries you need to know" class="md:w-48 w-9/12 mb-5 md:mb-16 md:ml-5 md:mt-16 md:float-right rounded mt-6 inline-block img" width=2500 height=2500 onerror='this.onerror="null",this.src="/images/covers/list-of-recommended-libraries_hu0397679280a94b58fae63515b3172745_163836_2500x2500_resize_lanczos_3.png"'></div><h4 class=mb-3><a href=https://threedots.tech/post/list-of-recommended-libraries/>The Go libraries that never failed us: 22 libraries you need to know</a></h4><ul class=mb-4><li class=inline-block><div class="flex flex-row"><div class=shrink-0><a href=https://threedots.tech/about/><div class=mr-3><img src=https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_50x50_resize_q80_h2_lanczos.webp loading=lazy srcset="https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_50x50_resize_q80_h2_lanczos.webp 1x, https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_100x100_resize_q80_h2_lanczos.webp 2x, https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_150x150_resize_q80_h2_lanczos.webp 3x, https://threedots.tech/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_45x45_resize_q80_h2_lanczos.webp 45w" decoding=async alt=Avatar class="rounded-full inline img" width=50 height=50 onerror='this.onerror="null",this.src="/img/avatars/robert_huaed81a0e21e264b1018f1f0e462a5fb2_34809_50x50_resize_q80_lanczos.jpeg"'></div></a></div><div class="m-auto text-slate-800 dark:text-gray-300"><a href=https://threedots.tech/about/><span class="mr-3 font-bold">Robert Laszczak</span></a></div></div></li></ul><a href=https://threedots.tech/post/list-of-recommended-libraries/><p class="mb-6 text-justify">Did you have a situation when you lost a ton of time finding a Go library for your need? In theory, you can check lists like Awesome Go or make a choice based on GitHub stars. But Awesome Go contains over 2600 libraries, and popularity is not always the best indicator of library quality. I often thought that it would be great to have a place where I could find just the best and battle-tested libraries I could use in my project.</p><button class="btn btn-outline-primary btn-sm" aria-label="Read 'The Go libraries that never failed us: 22 libraries you need to know'">
  Read More</button></a></div></div></div></div></div></section></main><footer class="bg-theme-light dark:bg-darkmode-theme-light"><div class=container><div class="row items-center py-10"><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left"><a class="navbar-brand inline-block" href=https://threedots.tech/><img fetchpriority=high decoding=async class="img logo-light" width=200 height=31 src=https://threedots.tech/images/logo.svg alt="Three Dots Labs" onerror='this.onerror=null,this.src=""'>
  <img fetchpriority=high decoding=async class="img logo-dark" width=200 height=31 src=https://threedots.tech/images/logo-darkmode.svg alt="Three Dots Labs" onerror='this.onerror=null,this.src=""'></a></div><div class="lg:col-6 mb-8 text-center lg:mb-0"><ul><li class="m-3 inline-block"><a href=/contact/>Contact</a></li><li class="m-3 inline-block"><a href=/privacy-policy/>Privacy Policy</a></li><li class="m-3 inline-block"><a href=/about/>About us</a></li></ul></div><div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right"><ul class=social-icons><li><a target=_blank aria-label=github rel="nofollow noopener" href=https://github.com/ThreeDotsLabs><svg class="github icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a></li><li><a target=_blank aria-label=rss rel="nofollow noopener" href=https://threedots.tech/index.xml><svg class="rss icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></a></li><li><a target=_blank aria-label=twitter rel="nofollow noopener" href=https://twitter.com/ThreeDotsLabs><svg class="twitter-x icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentcolor" viewBox="0 0 16 16"><path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75zm-.86 13.028h1.36L4.323 2.145H2.865z"/></svg></a></li><li><a target=_blank aria-label=linkedin rel="nofollow noopener" href=https://www.linkedin.com/company/three-dots-labs/><svg class="linkedin-in icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1.0 83.5.0 53.8a53.79 53.79.0 01107.58.0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29.0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg></a></li><li><a target=_blank aria-label=facebook rel="nofollow noopener" href=https://www.facebook.com/ThreeDotsLabs><svg class="facebook-f icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43.0 225.36.0c-73.22.0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"/></svg></a></li></ul></div></div></div><div class="border-border dark:border-darkmode-border border-t py-7"><div class="text-light dark:text-darkmode-light container text-center"><p>© Three Dots Labs 2014 — 2024</p><p class="mt-2 text-sm">We are a bootstrapped company.
  By supporting us, you support independent creators.</p></div></div></footer><script crossorigin=anonymous integrity="sha256-LYz2ORPp3CKELKSrSPEzjJAKI5LV0o9T7zr7INnVxYA=" src=https://threedots.tech/js/script.min.2d8cf63913e9dc22842ca4ab48f1338c900a2392d5d28f53ef3afb20d9d5c580.js></script><script defer async crossorigin=anonymous integrity="sha256-gx/nG6OEgwkXsroyT+ZZTWoOHXubteQn8uLs96vIb2U=" src=https://threedots.tech/js/script-lazy.min.831fe71ba384830917b2ba324fe6594d6a0e1d7b9bb5e427f2e2ecf7abc86f65.js></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js")</script></body></html>